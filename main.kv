#:kivy 1.10.0

ScreenManager:
	MainMenu:
	Modeller:
	Trainer:
	Generator:

<MainMenu>:
	name: 'menu'
	canvas.before:
		Color:
			rgba:	.8,.8,.8,1
		Rectangle:
			size: self.size
	BoxLayout:
		size_hint: .36, .94
		pos_hint: {'x':.06, 'center_y':.5}
		padding: 24, 24, 24, 24
		spacing: 12
		orientation: 'vertical'
		canvas.before:
			Color:
				rgba:	.0,.0,.0,.3
			Rectangle:
				pos: self.pos
				size: self.size
		Button:
			text: 'Load Model'
			background_color: .0, .0, .8, 1.
			on_press:
				root.manager.transition.direction = 'left'
				root.manager.current = 'model'

<Modeller>:
	name: 'model'
	BoxLayout:			# all
		size_hint: 1.,1.
		orientation: 'horizontal'
		BoxLayout:		# banner (left)
			size_hint: .2, 1.
			orientation: 'vertical'
			Button:
				text: 'Return'
				size_hint: 1., .1
				background_color: .0, .0, .8, 1.
				on_press:
					root.manager.transition.direction = 'right'
					root.manager.current = 'menu'
		GridLayout:		# info (middle)
			padding: 12
			size_hint: .8, 1.
			cols: 2
			Label:
				text: 'Model Type:'
				size_hint_x: None
			Spinner:
				text: 'Double'
				background_color: .0, .0, .8, 1.
				values: ('Single', 'Double')
			Label:
				text: 'Corpus Path:'
				size_hint_x: None
			TextInput:
				id: txt_corpus
				text: ''
			Label:
				text: 'Sentence Length:'
				size_hint_x: None
			TextInput:
				id: txt_seqlen
				text: ''
				input_filter: 'int'
		BoxLayout:		# banner (right)
			size_hint: .2, 1.
			orientation: 'vertical'
			Button:
				text: 'Train/Fit'
				background_color: .0, .3, .8, 1.
				on_press:
					root.manager.transition.direction = 'down'
					root.manager.current = 'train'
			Button:
				text: 'Generate Text'
				background_color: .3, .0, .8, 1.
				on_press:
					root.manager.transition.direction = 'up'
					root.manager.current = 'generate'

<Trainer>:
	name: 'train'
	BoxLayout:			# all
		size_hint: 1.,1.
		orientation: 'horizontal'
		BoxLayout:		# banner (left)
			size_hint: .2, 1.
			orientation: 'vertical'
			Button:
				text: 'Return'
				size_hint: 1., .1
				on_press:
					root.manager.transition.direction = 'up'
					root.manager.current = 'model'
		GridLayout:		# info (middle)
			padding: 12
			size_hint: .8, 1.
			cols: 2
			Label:
				text: 'Metadata file:'
				size_hint_x: None
			TextInput:
				id: txt_metadata
				text: ''
			Label:
				text: 'Output folder:'
				size_hint_x: None
			TextInput:
				id: txt_output
				text: ''
			Label:
				text: 'Starter file:'
				size_hint_x: None
			TextInput:
				id: txt_w
				text: ''
			Label:
				text: 'Epochs:'
				size_hint_x: None
			TextInput:
				id: txt_epochs
				text: ''
				input_filter: 'int'
		BoxLayout:		# banner (right)
			size_hint: .2, 1.
			orientation: 'vertical'
			Button:
				text: 'Train the network'
				on_press:
					root.train()

<Generator>:
	name: 'generate'
	BoxLayout:			# all
		size_hint: 1.,1.
		orientation: 'horizontal'
		BoxLayout:		# banner (left)
			size_hint: .2, 1.
			orientation: 'vertical'
			Button:
				text: 'Return'
				size_hint: 1., .1
				on_press:
					root.manager.transition.direction = 'down'
					root.manager.current = 'model'
		GridLayout:		# info (middle)
			padding: 12
			size_hint: .8, 1.
			cols: 2
			Label:
				text: 'Metadata file:'
				size_hint_x: None
			TextInput:
				id: txt_metadata
				text: ''
			Label:
				text: 'Weights file:'
				size_hint_x: None
			TextInput:
				id: txt_weights
				text: ''
			Label:
				text: 'Output:'
				size_hint_x: None
			TextInput:
				id: txt_output
				text: '- no text generated yet -'
		BoxLayout:		# banner (right)
			size_hint: .2, 1.
			orientation: 'vertical'
			Button:
				text: 'Generate text'
				on_press:
					root.generate()

# <FileSelectorToInput>:
